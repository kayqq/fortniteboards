{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport { FETCH_BY_PLAYERNAME_REQUESTED, FETCH_BY_PLAYERNAME_SUCCESS, FETCH_BY_PLAYERNAME_FAILURE } from \"./constants\";\nexport var fetchByUsername = function fetchByUsername(username, callback) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: FETCH_BY_PLAYERNAME_REQUESTED\n                });\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.get(\"https://fortnite-public-api.theapinetwork.com/prod09/users/search?username=\".concat(username));\n\n              case 4:\n                response = _context.sent;\n                dispatch({\n                  type: FETCH_BY_PLAYERNAME_SUCCESS,\n                  payload: response.data.entries\n                });\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                dispatch({\n                  type: FETCH_BY_PLAYERNAME_FAILURE,\n                  payload: _context.t0\n                });\n\n              case 11:\n                callback();\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var getProfile =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(username) {\n    var platform,\n        window,\n        response,\n        profile,\n        uid,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            platform = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 'pc';\n            window = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : 'season7';\n            console.log('is called: ', username);\n            _context2.next = 5;\n            return axios.get(\"https://fortnite-public-api.theapinetwork.com/prod09/users/search?username=\".concat(username));\n\n          case 5:\n            response = _context2.sent;\n            profile = response.data.entries.filter(function (profile) {\n              return profile.username === username;\n            });\n\n            if (profile.length) {\n              _context2.next = 9;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", new Error());\n\n          case 9:\n            uid = profile[0].uid;\n            _context2.next = 12;\n            return axios.get(\"https://fortnite-public-api.theapinetwork.com/prod09/users/public/br_stats?user_id=\".concat(uid, \"&platform=\").concat(platform, \"&window=\").concat(window));\n\n          case 12:\n            response = _context2.sent;\n            profile = response.data;\n            return _context2.abrupt(\"return\", profile);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function getProfile(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/kenny/Documents/GitHub/fortniteboards/src/actions/index.js"],"names":["axios","FETCH_BY_PLAYERNAME_REQUESTED","FETCH_BY_PLAYERNAME_SUCCESS","FETCH_BY_PLAYERNAME_FAILURE","fetchByUsername","username","callback","dispatch","type","get","response","payload","data","entries","getProfile","platform","window","console","log","profile","filter","length","Error","uid"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SACIC,6BADJ,EAEIC,2BAFJ,EAGIC,2BAHJ;AAMA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAWC,QAAX,EAAwB;AACnD;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACHA,gBAAAA,QAAQ,CAAC;AAAEC,kBAAAA,IAAI,EAAEP;AAAR,iBAAD,CAAR;AADG;AAAA;AAAA,uBAGwBD,KAAK,CAACS,GAAN,sFAC2DJ,QAD3D,EAHxB;;AAAA;AAGOK,gBAAAA,QAHP;AAMCH,gBAAAA,QAAQ,CAAC;AACLC,kBAAAA,IAAI,EAAEN,2BADD;AAELS,kBAAAA,OAAO,EAAED,QAAQ,CAACE,IAAT,CAAcC;AAFlB,iBAAD,CAAR;AAND;AAAA;;AAAA;AAAA;AAAA;AAWCN,gBAAAA,QAAQ,CAAC;AACLC,kBAAAA,IAAI,EAAEL,2BADD;AAELQ,kBAAAA,OAAO;AAFF,iBAAD,CAAR;;AAXD;AAgBHL,gBAAAA,QAAQ;;AAhBL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBH,CAnBM;AAqBP,OAAO,IAAMQ,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOT,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiBU,YAAAA,QAAjB,8DAA4B,IAA5B;AAAkCC,YAAAA,MAAlC,8DAA2C,SAA3C;AACtBC,YAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2Bb,QAA3B;AADsB;AAAA,mBAEDL,KAAK,CAACS,GAAN,sFAC6DJ,QAD7D,EAFC;;AAAA;AAElBK,YAAAA,QAFkB;AAKlBS,YAAAA,OALkB,GAKRT,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsBO,MAAtB,CAA6B,UAAAD,OAAO;AAAA,qBAAIA,OAAO,CAACd,QAAR,KAAqBA,QAAzB;AAAA,aAApC,CALQ;;AAAA,gBAOjBc,OAAO,CAACE,MAPS;AAAA;AAAA;AAAA;;AAAA,8CAOM,IAAIC,KAAJ,EAPN;;AAAA;AASdC,YAAAA,GATc,GASNJ,OAAO,CAAC,CAAD,CATD,CASdI,GATc;AAAA;AAAA,mBAULvB,KAAK,CAACS,GAAN,8FACyEc,GADzE,uBACyFR,QADzF,qBAC4GC,MAD5G,EAVK;;AAAA;AAUtBN,YAAAA,QAVsB;AAatBS,YAAAA,OAAO,GAAGT,QAAQ,CAACE,IAAnB;AAbsB,8CAefO,OAfe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVL,UAAU;AAAA;AAAA;AAAA,GAAhB","sourcesContent":["import axios from 'axios';\n\nimport {\n    FETCH_BY_PLAYERNAME_REQUESTED,\n    FETCH_BY_PLAYERNAME_SUCCESS,\n    FETCH_BY_PLAYERNAME_FAILURE\n} from './constants';\n\nexport const fetchByUsername = (username, callback) => {\n    return async dispatch => {\n        dispatch({ type: FETCH_BY_PLAYERNAME_REQUESTED });\n        try {\n            const response = await axios.get(\n                `https://fortnite-public-api.theapinetwork.com/prod09/users/search?username=${username}`\n            );\n            dispatch({\n                type: FETCH_BY_PLAYERNAME_SUCCESS,\n                payload: response.data.entries\n            });\n        } catch (error) {\n            dispatch({\n                type: FETCH_BY_PLAYERNAME_FAILURE,\n                payload: error\n            });\n        }\n        callback();\n    };\n};\n\nexport const getProfile = async (username, platform = 'pc', window = 'season7') => {\n    console.log('is called: ', username);\n    let response = await axios.get(\n        `https://fortnite-public-api.theapinetwork.com/prod09/users/search?username=${username}`\n    );\n    let profile = response.data.entries.filter(profile => profile.username === username);\n\n    if (!profile.length) return new Error();\n\n    const { uid } = profile[0];\n    response = await axios.get(\n        `https://fortnite-public-api.theapinetwork.com/prod09/users/public/br_stats?user_id=${uid}&platform=${platform}&window=${window}`\n    );\n    profile = response.data;\n\n    return profile;\n};\n"]},"metadata":{},"sourceType":"module"}