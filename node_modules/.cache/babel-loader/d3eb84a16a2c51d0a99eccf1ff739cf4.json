{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { Search, Grid, Icon } from 'semantic-ui-react';\nimport { getUsernames } from \"../actions\";\nimport { useDebounce } from \"../hooks/useDebounce\";\n\nvar resultRenderer = function resultRenderer(_ref) {\n  var uid = _ref.uid,\n      username = _ref.username,\n      platform = _ref.platform;\n  var iconName = 'keyboard outline';\n\n  switch (platform) {\n    case 'ps4':\n      iconName = 'game';\n      break;\n\n    case 'nintendo':\n      iconName = 'game';\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(Grid, null, React.createElement(Grid.Column, {\n    width: \"13\"\n  }, React.createElement(\"span\", {\n    key: uid,\n    title: username\n  }, username)), React.createElement(Grid.Column, {\n    width: \"3\",\n    floated: \"right\"\n  }, React.createElement(Icon, {\n    name: iconName\n  })));\n};\n\nvar SearchBar = function SearchBar(_ref2) {\n  var handleResultSelect = _ref2.handleResultSelect;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchTerm = _useState2[0],\n      setSearchTerm = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      results = _useState4[0],\n      setResults = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isSearching = _useState6[0],\n      setIsSearching = _useState6[1];\n\n  var debouncedSearchTerm = useDebounce(searchTerm, 200);\n\n  function fetch() {\n    return _fetch.apply(this, arguments);\n  }\n\n  function _fetch() {\n    _fetch = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, formattedResults;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getUsernames(debouncedSearchTerm);\n\n            case 2:\n              response = _context.sent;\n              formattedResults = response.map(function (result, index) {\n                result.key = index;\n                result.title = result.username;\n                return result;\n              });\n              console.log(formattedResults);\n              setResults(formattedResults);\n              setIsSearching(false);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    return _fetch.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (debouncedSearchTerm) {\n      setIsSearching(true);\n      fetch();\n    } else {\n      resetComponent();\n    }\n  }, [debouncedSearchTerm]);\n\n  var resetComponent = function resetComponent() {\n    setSearchTerm('');\n    setIsSearching(false);\n    setResults([]);\n  };\n\n  var onResultSelect = function onResultSelect(e, _ref3) {\n    var result = _ref3.result;\n    setSearchTerm(result.username);\n    handleResultSelect(result);\n    resetComponent();\n  };\n\n  var onSearchChange = function onSearchChange(e, _ref4) {\n    var value = _ref4.value;\n    if (!value.length) return resetComponent();\n    setIsSearching(true);\n    setSearchTerm(value);\n  };\n\n  return React.createElement(Search, {\n    input: {\n      fluid: true,\n      icon: 'arrow circle right'\n    },\n    loading: isSearching,\n    placeholder: 'Enter an Epic username',\n    onResultSelect: onResultSelect,\n    onSearchChange: onSearchChange,\n    results: results,\n    resultRenderer: resultRenderer,\n    value: searchTerm,\n    showNoResults: isSearching ? false : true\n  });\n};\n\nexport default SearchBar;","map":{"version":3,"sources":["/Users/kenny/Documents/GitHub/fortniteboards/src/components/SearchBar.js"],"names":["React","useState","useEffect","Search","Grid","Icon","getUsernames","useDebounce","resultRenderer","uid","username","platform","iconName","SearchBar","handleResultSelect","searchTerm","setSearchTerm","results","setResults","isSearching","setIsSearching","debouncedSearchTerm","fetch","response","formattedResults","map","result","index","key","title","console","log","resetComponent","onResultSelect","e","onSearchChange","value","length","fluid","icon"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Search, Grid, Icon } from 'semantic-ui-react';\nimport { getUsernames } from '../actions';\n\nimport { useDebounce } from '../hooks/useDebounce';\n\nconst resultRenderer = ({ uid, username, platform }) => {\n    let iconName = 'keyboard outline';\n    switch (platform) {\n        case 'ps4':\n            iconName = 'game';\n            break;\n        case 'nintendo':\n            iconName = 'game';\n            break;\n        default:\n            break;\n    }\n\n    return (\n        <Grid>\n            <Grid.Column width=\"13\">\n                <span key={uid} title={username}>\n                    {username}\n                </span>\n            </Grid.Column>\n            <Grid.Column width=\"3\" floated=\"right\">\n                <Icon name={iconName} />\n            </Grid.Column>\n        </Grid>\n    );\n};\n\nconst SearchBar = ({ handleResultSelect }) => {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [results, setResults] = useState([]);\n    const [isSearching, setIsSearching] = useState(false);\n    const debouncedSearchTerm = useDebounce(searchTerm, 200);\n\n    async function fetch() {\n        const response = await getUsernames(debouncedSearchTerm);\n        const formattedResults = response.map((result, index) => {\n            result.key = index;\n            result.title = result.username;\n            return result;\n        });\n        console.log(formattedResults);\n        setResults(formattedResults);\n        setIsSearching(false);\n    }\n\n    useEffect(() => {\n        if (debouncedSearchTerm) {\n            setIsSearching(true);\n            fetch();\n        } else {\n            resetComponent();\n        }\n    }, [debouncedSearchTerm]);\n\n    const resetComponent = () => {\n        setSearchTerm('');\n        setIsSearching(false);\n        setResults([]);\n    };\n\n    const onResultSelect = (e, { result }) => {\n        setSearchTerm(result.username);\n        handleResultSelect(result);\n        resetComponent();\n    };\n\n    const onSearchChange = (e, { value }) => {\n        if (!value.length) return resetComponent();\n        setIsSearching(true);\n        setSearchTerm(value);\n    };\n\n    return (\n        <Search\n            input={{ fluid: true, icon: 'arrow circle right' }}\n            loading={isSearching}\n            placeholder={'Enter an Epic username'}\n            onResultSelect={onResultSelect}\n            onSearchChange={onSearchChange}\n            results={results}\n            resultRenderer={resultRenderer}\n            value={searchTerm}\n            showNoResults={isSearching ? false : true}\n        />\n    );\n};\n\nexport default SearchBar;\n"]},"metadata":{},"sourceType":"module"}