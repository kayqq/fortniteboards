{"version":3,"file":"static/webpack/static/development/pages/leaderboard.js.c9571e7a2f86e782551d.hot-update.js","sources":["webpack:///./src/components/SearchBar.js","webpack:///./src/hooks/useDebounce.js"],"sourcesContent":["import _ from 'lodash';\nimport React, { Component, useState, useEffect } from 'react';\nimport { Search, Label } from 'semantic-ui-react';\nimport { getUsernames } from '../actions';\n\nimport { useDebounce } from '../hooks/useDebounce';\n\nconst resultRenderer = ({ uid, username }) => <Label key={uid} content={username} />;\n\n// export default class SearchBar extends Component {\n//     constructor(props) {\n//         super(props);\n\n//         this.state = {\n//             value: '',\n//             isLoading: false\n//         };\n//     }\n\n//     componentWillMount() {\n//         this.resetComponent();\n//     }\n\n//     resetComponent = () => this.setState({ isLoading: false, value: '' });\n\n//     handleResultSelect = async (e, { result }) => {\n//         const { handleResultSelect } = this.props;\n//         this.setState({ value: result.username, isLoading: true });\n//         await handleResultSelect(result.username);\n//         this.resetComponent();\n//     };\n\n//     handleSearchChange = (e, { value }) => {\n//         this.setState({ isLoading: true, value }, () => {\n//             // reset loading if empty\n//             if (this.state.value.length < 1) return this.resetComponent();\n\n//             // fetch users by username\n//             this.props.fetchByUsername(this.state.value, () => {\n//                 this.setState({ isLoading: false });\n//             });\n//         });\n//     };\n\n//     render() {\n//         const { isLoading, value } = this.state;\n//         const { results } = this.props;\n//         return (\n//             <Search\n//                 input={{ fluid: true, icon: 'arrow circle right' }}\n//                 loading={isLoading}\n//                 placeholder={'Enter your Epic username'}\n//                 onResultSelect={this.handleResultSelect}\n//                 onSearchChange={_.debounce(this.handleSearchChange, 500, {\n//                     leading: true\n//                 })}\n//                 results={results}\n//                 resultRenderer={resultRenderer}\n//                 value={value}\n//                 showNoResults={false}\n//             />\n//         );\n//     }\n// }\n\nconst SearchBar = ({ handleResultSelect }) => {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [results, setResults] = useState([]);\n    const [isSearching, setIsSearching] = useState(false);\n    const debouncedSearchTerm = useDebounce(searchTerm, 500);\n\n    async function fetch() {\n        const response = await getUsernames(debouncedSearchTerm);\n        const formattedResults = response.map((result, index) => {\n            result.key = index;\n            result.title = result.username;\n            return result;\n        });\n        setResults(formattedResults);\n        setIsSearching(false);\n    }\n\n    useEffect(\n        () => {\n            if (debouncedSearchTerm) {\n                setIsSearching(true);\n                fetch();\n            } else {\n                resetComponent();\n            }\n        },\n        [debouncedSearchTerm] // Only call effect if debounced search term changes\n    );\n\n    const resetComponent = () => {\n        setSearchTerm('');\n        setIsSearching(false);\n        setResults([]);\n    };\n\n    const onResultSelect = (e, { result }) => {\n        setSearchTerm(result.username);\n        handleResultSelect(result.username);\n        resetComponent();\n    };\n\n    const onSearchChange = (e, { value }) => {\n        if (!value.length) return resetComponent();\n        setIsSearching(true);\n        setSearchTerm(value);\n    };\n\n    return (\n        <Search\n            input={{ fluid: true, icon: 'arrow circle right' }}\n            loading={isSearching}\n            placeholder={'Enter your Epic username'}\n            onResultSelect={onResultSelect}\n            onSearchChange={onSearchChange}\n            results={results}\n            resultRenderer={resultRenderer}\n            value={searchTerm}\n            showNoResults={false}\n        />\n    );\n};\n\nexport default SearchBar;\n\n// // Hook\n// function useDebounce(value, delay) {\n//     // State and setters for debounced value\n//     const [debouncedValue, setDebouncedValue] = useState(value);\n\n//     useEffect(\n//         () => {\n//             // Update debounced value after delay\n//             const handler = setTimeout(() => {\n//                 setDebouncedValue(value);\n//             }, delay);\n//             return () => {\n//                 clearTimeout(handler);\n//             };\n//         },\n//         [value] // Only re-call effect if value or delay changes\n//     );\n\n//     return debouncedValue;\n// }\n","import React, { useState, useEffect } from 'react';\n\nexport const useDebounce = (value, delay) => {\n    // State and setters for debounced value\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(\n        () => {\n            // Update debounced value after delay\n            const handler = setTimeout(() => {\n                setDebouncedValue(value);\n            }, delay);\n            return () => {\n                clearTimeout(handler);\n            };\n        },\n        [value] // Only re-call effect if value or delay changes\n    );\n\n    return debouncedValue;\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AALA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AAAA;AACA;AAgBA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAYA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;;;;;;;ACpJA;AAEA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAaA;AACA;;;;A","sourceRoot":""}